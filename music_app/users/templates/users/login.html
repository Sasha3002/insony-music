{% extends "users/base.html" %}
{% block global_messages %}{% endblock %}
{% block content %}


<div class="row justify-content-center mt-5">
  <div class="col-sm-10 col-md-8 col-lg-5">
    <div class="auth-card shadow-sm p-4">
      <div class="text-center mb-3">

        <div class="auth-brand fs-4">Insony</div>
        <div class="auth-sub small">Witaj w muzycznej społeczności</div>
      </div>

      {% if messages %}
        {% for message in messages %}
          <div class="alert alert-isony alert-dismissible fade show py-2 px-3 mb-3" role="alert">
            <i class="bi bi-exclamation-triangle me-2"></i>
            {{ message }}
          </div>
        {% endfor %}
      {% endif %}

      <form method="post" novalidate>
        {% csrf_token %}
        {% if next_url %}<input type="hidden" name="next" value="{{ next_url }}">{% endif %}

        <div class="mb-3">
          <label class="form-label">Login</label>
          <div class="input-group">
            <span class="input-group-text"><i class="bi bi-person"></i></span>
            <input
              type="text"
              name="username"
              class="form-control"
              placeholder="Twoja nazwa użytkownika"
              value="{{ username }}"
              autocomplete="username"
              required
              autofocus>
          </div>
        </div>

        <div class="mb-2">
          <label class="form-label">Hasło</label>
          <div class="input-group">
            <span class="input-group-text"><i class="bi bi-lock"></i></span>
            <input id="loginPassword"
                   type="password"
                   name="password"
                   class="form-control"
                   placeholder="••••••••"
                   autocomplete="current-password"
                   required>
            <button class="btn btn-outline-secondary" type="button"
                    aria-label="Pokaż/ukryj hasło"
                    onclick="togglePassword(this, '#loginPassword')">
              <i class="bi bi-eye"></i>
            </button>
          </div>
        </div>

        <div class="d-flex justify-content-between align-items-center mb-3">
          <div class="form-check">
            <input class="form-check-input" type="checkbox" id="rememberMe" name="remember_me" checked>
            <label class="form-check-label" for="rememberMe">Zapamiętaj mnie</label>
          </div>
          <a class="small auth-link" href="{% url 'password_reset_request' %}" tabindex="-1">Nie pamiętasz hasła?</a>
        </div>

        <button class="btn btn-primary w-100" type="submit">Zaloguj się</button>
      </form>


      <div style="text-align: center; margin-top: 16px;">
        <a href="{% url 'resend_verification' %}" style="color: #60a5fa; text-decoration: none; font-size: 0.9rem;">
          <i class="bi bi-envelope"></i> Nie otrzymałeś linku weryfikacyjnego?
        </a>
      </div>

      <hr class="my-4">
      <p class="mb-0 text-center auth-sub">
        Nie masz konta?
        <a class="auth-link" href="{% url 'register' %}">Zarejestruj się</a>
      </p>
    </div>
  </div>
</div>

{% endblock %}
