{% extends "users/base.html" %}
{% load static %}

{% block extra_css %}
  <link rel="stylesheet" href="{% static 'css/music.css' %}">
{% endblock %}

{% block content %}

<div class="container py-4">

  {% if viewing_other_user %}
    <a href="{% url 'user_profile_public' profile_user.username %}" class="btn btn-outline-light mb-3">
      <i class="bi bi-arrow-left"></i> Powrót do profilu
    </a>
  {% endif %}
  
  <!-- Hero Section -->
  <div class="playlist-list-hero">
    <div class="hero-content">
      <h1>
        <i class="bi bi-music-note-list"></i>
        {% if viewing_other_user %}
          Playlisty użytkownika @{{ profile_user.username }}
        {% else %}
          Moje Playlisty
        {% endif %}
      </h1>
      <p>
        {% if viewing_other_user %}
          Publiczne playlisty użytkownika
        {% else %}
          Zarządzaj swoimi kolekcjami muzycznymi
        {% endif %}
      </p>
    </div>
    {% if not viewing_other_user %}
      <a href="{% url 'playlist_create' %}" class="btn-create-playlist">
        <i class="bi bi-plus-circle"></i>
        Utwórz playlistę
      </a>
    {% endif %}
  </div>

  {% if playlists %}
    <!-- Playlists Grid -->
    <div class="playlists-grid">
      {% for playlist in playlists %}
        <div class="playlist-card" onclick="window.location.href='{% url 'playlist_detail' playlist.id %}'">
          <div class="playlist-cover">
            {% if playlist.cover_image %}
              <img src="{{ playlist.cover_image.url }}" alt="{{ playlist.name }}">
            {% else %}
              <i class="bi bi-music-note-list"></i>
            {% endif %}
            <div class="playlist-cover-overlay"></div>
            
            {% if playlist.is_favorite %}
              <div class="playlist-favorite-badge">
                <i class="bi bi-heart-fill"></i>
                Ulubione
              </div>
            {% endif %}
          </div>
          
          <div class="playlist-info">
            <h3 class="playlist-name">{{ playlist.name }}</h3>
            <p class="playlist-description">
              {% if playlist.description %}
                {{ playlist.description }}
              {% else %}
                {% if playlist.is_favorite %}
                  Twoje ulubione utwory w jednym miejscu
                {% else %}
                  Brak opisu
                {% endif %}
              {% endif %}
            </p>
            
            <div class="playlist-stats">
              <div class="playlist-stat">
                <i class="bi bi-music-note"></i>
                <span>{{ playlist.track_count }} {% if playlist.track_count == 1 %}utwór{% elif playlist.track_count < 5 %}utwory{% else %}utworów{% endif %}</span>
              </div>
              <div class="playlist-stat">
                <i class="bi bi-clock"></i>
                <span>{{ playlist.created_at|date:"d.m.Y" }}</span>
              </div>
              {% if not viewing_other_user %}
                <div class="playlist-stat">
                  <i class="bi bi-{% if playlist.is_public %}globe{% else %}lock{% endif %}" style="color: {% if playlist.is_public %}#10b981{% else %}#6b7280{% endif %};"></i>
                  <span style="color: {% if playlist.is_public %}#10b981{% else %}#6b7280{% endif %};">
                    {% if playlist.is_public %}Publiczna{% else %}Prywatna{% endif %}
                  </span>
                </div>
              {% endif %}
            </div>
          </div>
        </div>
      {% endfor %}
    </div>
  {% else %}
    <!-- Empty State -->
    <div class="empty-playlists">
      <i class="bi bi-music-note-list"></i>
      <h3>
        {% if viewing_other_user %}
          Ten użytkownik nie ma publicznych playlist
        {% else %}
          Nie masz jeszcze żadnych playlist
        {% endif %}
      </h3>
      {% if not viewing_other_user %}
        <p>Utwórz swoją pierwszą playlistę i organizuj ulubioną muzykę</p>
        <a href="{% url 'playlist_create' %}" class="btn-create-playlist">
          <i class="bi bi-plus-circle"></i>
          Utwórz pierwszą playlistę
        </a>
      {% endif %}
    </div>
  {% endif %}

</div>

{% endblock %}